# Comparing `tmp/metricq-5.2.0-py3-none-any.whl.zip` & `tmp/metricq-5.3.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,38 +1,38 @@
-Zip file size: 72481 bytes, number of entries: 36
--rw-r--r--  2.0 unx     2680 b- defN 23-Jun-20 10:56 metricq/__init__.py
--rw-r--r--  2.0 unx      124 b- defN 23-Jun-20 10:56 metricq/_protobuf_version.py
--rw-r--r--  2.0 unx    31111 b- defN 23-Jun-20 10:56 metricq/agent.py
--rw-r--r--  2.0 unx     9409 b- defN 23-Jun-20 10:56 metricq/client.py
--rw-r--r--  2.0 unx     4990 b- defN 23-Jun-20 10:56 metricq/connection_watchdog.py
--rw-r--r--  2.0 unx     5945 b- defN 23-Jun-20 10:56 metricq/data_client.py
--rw-r--r--  2.0 unx     2394 b- defN 23-Jun-20 10:56 metricq/datachunk_pb2.py
--rw-r--r--  2.0 unx     2776 b- defN 23-Jun-20 10:56 metricq/datachunk_pb2.pyi
--rw-r--r--  2.0 unx     4600 b- defN 23-Jun-20 10:56 metricq/drain.py
--rw-r--r--  2.0 unx     3716 b- defN 23-Jun-20 10:56 metricq/exceptions.py
--rw-r--r--  2.0 unx    31510 b- defN 23-Jun-20 10:56 metricq/history_client.py
--rw-r--r--  2.0 unx    13343 b- defN 23-Jun-20 10:56 metricq/history_pb2.py
--rw-r--r--  2.0 unx     7949 b- defN 23-Jun-20 10:56 metricq/history_pb2.pyi
--rw-r--r--  2.0 unx     7514 b- defN 23-Jun-20 10:56 metricq/interval_source.py
--rw-r--r--  2.0 unx     1272 b- defN 23-Jun-20 10:56 metricq/logging.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-20 10:56 metricq/py.typed
--rw-r--r--  2.0 unx     5606 b- defN 23-Jun-20 10:56 metricq/rpc.py
--rw-r--r--  2.0 unx     9718 b- defN 23-Jun-20 10:56 metricq/sink.py
--rw-r--r--  2.0 unx    10746 b- defN 23-Jun-20 10:56 metricq/source.py
--rw-r--r--  2.0 unx     4173 b- defN 23-Jun-20 10:56 metricq/source_metric.py
--rw-r--r--  2.0 unx     5462 b- defN 23-Jun-20 10:56 metricq/subscription.py
--rw-r--r--  2.0 unx     7261 b- defN 23-Jun-20 10:56 metricq/synchronous_source.py
--rw-r--r--  2.0 unx     1700 b- defN 23-Jun-20 10:56 metricq/version.py
--rw-r--r--  2.0 unx       90 b- defN 23-Jun-20 10:56 metricq/pandas/__init__.py
--rw-r--r--  2.0 unx     4463 b- defN 23-Jun-20 10:56 metricq/pandas/pandas_history_client.py
--rw-r--r--  2.0 unx      330 b- defN 23-Jun-20 10:56 metricq/timeseries/__init__.py
--rw-r--r--  2.0 unx      253 b- defN 23-Jun-20 10:56 metricq/timeseries/extras.py
--rw-r--r--  2.0 unx     5060 b- defN 23-Jun-20 10:56 metricq/timeseries/time_aggregate.py
--rw-r--r--  2.0 unx     1103 b- defN 23-Jun-20 10:56 metricq/timeseries/time_value.py
--rw-r--r--  2.0 unx    16512 b- defN 23-Jun-20 10:56 metricq/timeseries/timedelta.py
--rw-r--r--  2.0 unx     8834 b- defN 23-Jun-20 10:56 metricq/timeseries/timestamp.py
--rw-r--r--  2.0 unx     1559 b- defN 23-Jun-20 10:56 metricq-5.2.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     6904 b- defN 23-Jun-20 10:56 metricq-5.2.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-20 10:56 metricq-5.2.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        8 b- defN 23-Jun-20 10:56 metricq-5.2.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2890 b- defN 23-Jun-20 10:56 metricq-5.2.0.dist-info/RECORD
-36 files, 222097 bytes uncompressed, 67923 bytes compressed:  69.4%
+Zip file size: 72790 bytes, number of entries: 36
+-rw-r--r--  2.0 unx     2680 b- defN 23-Jun-27 09:15 metricq/__init__.py
+-rw-r--r--  2.0 unx      124 b- defN 23-Jun-27 09:16 metricq/_protobuf_version.py
+-rw-r--r--  2.0 unx    31869 b- defN 23-Jun-27 09:15 metricq/agent.py
+-rw-r--r--  2.0 unx     9409 b- defN 23-Jun-27 09:15 metricq/client.py
+-rw-r--r--  2.0 unx     4990 b- defN 23-Jun-27 09:15 metricq/connection_watchdog.py
+-rw-r--r--  2.0 unx     5945 b- defN 23-Jun-27 09:15 metricq/data_client.py
+-rw-r--r--  2.0 unx     2394 b- defN 23-Jun-27 09:16 metricq/datachunk_pb2.py
+-rw-r--r--  2.0 unx     2776 b- defN 23-Jun-27 09:16 metricq/datachunk_pb2.pyi
+-rw-r--r--  2.0 unx     4600 b- defN 23-Jun-27 09:15 metricq/drain.py
+-rw-r--r--  2.0 unx     3716 b- defN 23-Jun-27 09:15 metricq/exceptions.py
+-rw-r--r--  2.0 unx    31510 b- defN 23-Jun-27 09:15 metricq/history_client.py
+-rw-r--r--  2.0 unx    13343 b- defN 23-Jun-27 09:16 metricq/history_pb2.py
+-rw-r--r--  2.0 unx     7949 b- defN 23-Jun-27 09:16 metricq/history_pb2.pyi
+-rw-r--r--  2.0 unx     7514 b- defN 23-Jun-27 09:15 metricq/interval_source.py
+-rw-r--r--  2.0 unx     1272 b- defN 23-Jun-27 09:15 metricq/logging.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-27 09:15 metricq/py.typed
+-rw-r--r--  2.0 unx     5606 b- defN 23-Jun-27 09:15 metricq/rpc.py
+-rw-r--r--  2.0 unx     9718 b- defN 23-Jun-27 09:15 metricq/sink.py
+-rw-r--r--  2.0 unx    10746 b- defN 23-Jun-27 09:15 metricq/source.py
+-rw-r--r--  2.0 unx     4173 b- defN 23-Jun-27 09:15 metricq/source_metric.py
+-rw-r--r--  2.0 unx     5462 b- defN 23-Jun-27 09:15 metricq/subscription.py
+-rw-r--r--  2.0 unx     7261 b- defN 23-Jun-27 09:15 metricq/synchronous_source.py
+-rw-r--r--  2.0 unx     1700 b- defN 23-Jun-27 09:15 metricq/version.py
+-rw-r--r--  2.0 unx       90 b- defN 23-Jun-27 09:15 metricq/pandas/__init__.py
+-rw-r--r--  2.0 unx     4463 b- defN 23-Jun-27 09:15 metricq/pandas/pandas_history_client.py
+-rw-r--r--  2.0 unx      330 b- defN 23-Jun-27 09:15 metricq/timeseries/__init__.py
+-rw-r--r--  2.0 unx      253 b- defN 23-Jun-27 09:15 metricq/timeseries/extras.py
+-rw-r--r--  2.0 unx     5060 b- defN 23-Jun-27 09:15 metricq/timeseries/time_aggregate.py
+-rw-r--r--  2.0 unx     1103 b- defN 23-Jun-27 09:15 metricq/timeseries/time_value.py
+-rw-r--r--  2.0 unx    16798 b- defN 23-Jun-27 09:15 metricq/timeseries/timedelta.py
+-rw-r--r--  2.0 unx     8834 b- defN 23-Jun-27 09:15 metricq/timeseries/timestamp.py
+-rw-r--r--  2.0 unx     1559 b- defN 23-Jun-27 09:16 metricq-5.3.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     6985 b- defN 23-Jun-27 09:16 metricq-5.3.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-27 09:16 metricq-5.3.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        8 b- defN 23-Jun-27 09:16 metricq-5.3.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2890 b- defN 23-Jun-27 09:16 metricq-5.3.0.dist-info/RECORD
+36 files, 223222 bytes uncompressed, 68232 bytes compressed:  69.4%
```

## zipnote {}

```diff
@@ -87,23 +87,23 @@
 
 Filename: metricq/timeseries/timedelta.py
 Comment: 
 
 Filename: metricq/timeseries/timestamp.py
 Comment: 
 
-Filename: metricq-5.2.0.dist-info/LICENSE
+Filename: metricq-5.3.0.dist-info/LICENSE
 Comment: 
 
-Filename: metricq-5.2.0.dist-info/METADATA
+Filename: metricq-5.3.0.dist-info/METADATA
 Comment: 
 
-Filename: metricq-5.2.0.dist-info/WHEEL
+Filename: metricq-5.3.0.dist-info/WHEEL
 Comment: 
 
-Filename: metricq-5.2.0.dist-info/top_level.txt
+Filename: metricq-5.3.0.dist-info/top_level.txt
 Comment: 
 
-Filename: metricq-5.2.0.dist-info/RECORD
+Filename: metricq-5.3.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## metricq/_protobuf_version.py

```diff
@@ -1,3 +1,3 @@
-# file generated on 2023-06-20 10:56:36.168189
+# file generated on 2023-06-27 09:16:08.934004
 _protobuf_version = "3.12.4"
 _protobuf_requirement = "protobuf>=3.12, <3.13"
```

## metricq/agent.py

```diff
@@ -273,39 +273,56 @@
         self._management_connection_watchdog.start()
         self._management_connection_watchdog.set_established()
 
     def run(
         self,
         catch_signals: Iterable[str] = ("SIGINT", "SIGTERM"),
         cancel_on_exception: bool = False,
+        use_uvloop: Optional[bool] = None,
     ) -> None:
         """Run an Agent by calling :meth:`connect` and waiting for it to be stopped via :meth:`stop`.
 
         If :meth:`connect` raises an exception, :exc:`.ConnectFailed` is
         raised, with the offending exception attached as a cause.  Any
         exception passed to :meth:`stop` is reraised.
 
         Args:
             catch_signals:
                 Call :meth:`on_signal` if any of these signals were raised.
             cancel_on_exception:
                 Stop the running Agent when an unhandled exception occurs.
                 The exception is reraised from this method.
+            use_uvloop:
+                Use uvloop as the asyncio event loop. If ``None``, uvloop is used if available.
+                If ``True``, uvloop is used and an ImportError is raised if it is not available.
+                If ``False``, uvloop is not used even if it is available.
 
         Raises:
             ConnectFailed:
                 Failed to :meth:`connect` to the MetricQ network.
                 The source exception is attached as a cause.
             Exception: Any exception passed to :meth:`stop`.
         """
         self._cancel_on_exception = cancel_on_exception
+        coro = self._wait_for_stop(catch_signals)
 
-        logger.debug("Starting event loop ...")
-        asyncio.run(self._wait_for_stop(catch_signals))
-        logger.debug("Event loop completed, exiting...")
+        if use_uvloop is True or use_uvloop is None:
+            try:
+                import uvloop
+
+                logger.debug("Installing uvloop")
+                uvloop.install()
+            except ImportError:
+                if use_uvloop:
+                    logger.error("Failed to import uvloop as requested.")
+                    raise
+                logger.debug("uvloop not available, falling back to asyncio.")
+        logger.debug("Starting runner.")
+        asyncio.run(coro)
+        logger.debug("runner completed.")
 
     async def _wait_for_stop(self, catch_signals: Iterable[str]) -> None:
         self._event_loop.set_exception_handler(self.on_exception)
         for signame in catch_signals:
             try:
                 self._event_loop.add_signal_handler(
                     getattr(signal, signame),
```

## metricq/timeseries/timedelta.py

```diff
@@ -171,14 +171,21 @@
         Returns:
             A :class:`Timedelta` object
         """
         return Timedelta(int(seconds * 1e9))
 
     @property
     def precise_string(self) -> str:
+        """
+        An exact string representation of the duration preserving all nanosecond digits.
+        If possible, a human-readable string is returned, e.g. ``100ms``.
+        The result of this can be parsed by :meth:`from_string` without losing
+        precision.
+        """
+
         if self._value % 1_000 != 0:
             return f"{self._value}ns"
 
         elif self._value % 1_000_000 != 0:
             return f"{self._value // 1_000}μs"
 
         elif self._value % 1_000_000_000 != 0:
```

## Comparing `metricq-5.2.0.dist-info/LICENSE` & `metricq-5.3.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `metricq-5.2.0.dist-info/METADATA` & `metricq-5.3.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: metricq
-Version: 5.2.0
+Version: 5.3.0
 Summary: A highly-scalable, distributed metric data processing framework based on RabbitMQ
 Home-page: https://github.com/metricq/metricq-python
 Author: TU Dresden
 License: BSD 3-clause "New" or "Revised License"
 Classifier: License :: OSI Approved :: BSD License
 Classifier: Programming Language :: Python :: 3
 Requires-Python: >=3.10
@@ -31,14 +31,15 @@
 Requires-Dist: mypy (>=1.2.0) ; extra == 'dev'
 Requires-Dist: mypy-protobuf ; extra == 'dev'
 Requires-Dist: types-Deprecated ; extra == 'dev'
 Requires-Dist: types-setuptools ; extra == 'dev'
 Requires-Dist: types-protobuf ; extra == 'dev'
 Requires-Dist: types-python-dateutil ; extra == 'dev'
 Requires-Dist: pandas-stubs (~=2.0.1) ; extra == 'dev'
+Requires-Dist: uvloop ; extra == 'dev'
 Requires-Dist: pandas (~=2.0.1) ; extra == 'dev'
 Requires-Dist: sphinx (~=6.1.3) ; extra == 'dev'
 Requires-Dist: sphinx-rtd-theme (~=1.2.0) ; extra == 'dev'
 Requires-Dist: sphinx-autodoc-typehints (~=1.22.0) ; extra == 'dev'
 Requires-Dist: sphinxcontrib-trio (~=1.1.2) ; extra == 'dev'
 Requires-Dist: scanpydoc (~=0.7.8) ; extra == 'dev'
 Requires-Dist: tox ; extra == 'dev'
@@ -68,14 +69,15 @@
 Requires-Dist: mypy (>=1.2.0) ; extra == 'typing'
 Requires-Dist: mypy-protobuf ; extra == 'typing'
 Requires-Dist: types-Deprecated ; extra == 'typing'
 Requires-Dist: types-setuptools ; extra == 'typing'
 Requires-Dist: types-protobuf ; extra == 'typing'
 Requires-Dist: types-python-dateutil ; extra == 'typing'
 Requires-Dist: pandas-stubs (~=2.0.1) ; extra == 'typing'
+Requires-Dist: uvloop ; extra == 'typing'
 Requires-Dist: pandas (~=2.0.1) ; extra == 'typing'
 Requires-Dist: aiomonitor-ng ; extra == 'typing'
 Requires-Dist: click ; extra == 'typing'
 Requires-Dist: click-log ; extra == 'typing'
 Requires-Dist: pytest ; extra == 'typing'
 Requires-Dist: pytest-asyncio ; extra == 'typing'
 Requires-Dist: pytest-mock ; extra == 'typing'
```

## Comparing `metricq-5.2.0.dist-info/RECORD` & `metricq-5.3.0.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 metricq/__init__.py,sha256=6kgzmmXhfX5Mb2TR77ALUrV3OKDJsp_K48PGPf8wQ20,2680
-metricq/_protobuf_version.py,sha256=uC6o7sl2ZQzzRBz4xxbKtkH3SiIwLBBTVhHkgeulo44,124
-metricq/agent.py,sha256=VN1Qe7OcGYs0cpjEMdzY-NX9RgwdvclDEbJf3N67BoQ,31111
+metricq/_protobuf_version.py,sha256=RSxZ9bJNIbzfpphDQmG9KmMK-CH1cuMVe9Yghdlmew0,124
+metricq/agent.py,sha256=eDa9Lkj-JW7-tm9DGMLjlzAY6JbMwPwWioyuz46SUoQ,31869
 metricq/client.py,sha256=4m9_wwy2DQ7Xx6eYMYunl_5u-2Ux_GfxLXcPGao3vQM,9409
 metricq/connection_watchdog.py,sha256=cv5gXbHlzHUlHqQbkeRnJ6yEsalt6Gi1Vb6_Z4rcOnY,4990
 metricq/data_client.py,sha256=OVW-iWzcQA-mww1NTbW5yMNnyli7_drcvFNAp6ck3ts,5945
 metricq/datachunk_pb2.py,sha256=pvFDu94IdU01_5amJf72gy6mK-ekGZmnrNlZ23lTBt8,2394
 metricq/datachunk_pb2.pyi,sha256=LWw976S7SJLKrUD1Doq-aZFxyf9a54cFVHQCo-vBRNc,2776
 metricq/drain.py,sha256=KcBqPwny8ztaMPlPzbDhzEHSNxxl0wL2Wf6gNWFnumg,4600
 metricq/exceptions.py,sha256=ZMVRqEypFQ78L_MzGPBoOrlXJjwNZuS89JUQlDiu7Bg,3716
@@ -23,14 +23,14 @@
 metricq/version.py,sha256=W-QgfeHfY0bcGOsGVYiT_FUI9C-cbnmtK9jjMSByqRY,1700
 metricq/pandas/__init__.py,sha256=t9fIMrdjz0GcsdgRFhHacxO3nor_fLg48FMYOexXP1Y,90
 metricq/pandas/pandas_history_client.py,sha256=YlxNOVL3QKQD8tjSvYpDkAvjapTQ6TLwxsfly9dyCxc,4463
 metricq/timeseries/__init__.py,sha256=toIY9gqliQNcwQLvgt8vuz0m1ng3siivR0P9QuicfNA,330
 metricq/timeseries/extras.py,sha256=6MOrfWEUJCP2DyqK-pUb04WYU8qEoO5p7EQDBhU67bE,253
 metricq/timeseries/time_aggregate.py,sha256=hGiexnzEGhX8IsVbHZdWa_d2u7IWkcOxy62i115_g34,5060
 metricq/timeseries/time_value.py,sha256=bcSZmvU4ANkjW40-Gf2_uLV8tWeOlMY56UlDQpCa4Eo,1103
-metricq/timeseries/timedelta.py,sha256=FnhBPzzFLeK3eutOF5FxUm2UdIlok3ByQguHEUBNorE,16512
+metricq/timeseries/timedelta.py,sha256=gYF7WRlobOMCzswzMqWhG_RvI7ZsBntxHYs3aJ2sHwc,16798
 metricq/timeseries/timestamp.py,sha256=MdhsRDP6NFs_dPoFHSruSu3-HkqhhuSxMO2Vaj7JWF0,8834
-metricq-5.2.0.dist-info/LICENSE,sha256=4h6-3O0i-fOl6I5GiEgQREkt1oGF13osLvN045KhVEQ,1559
-metricq-5.2.0.dist-info/METADATA,sha256=2sknz8robW2vwyGGkKvyNYrzJPo06G5ckVsW56C7OKI,6904
-metricq-5.2.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-metricq-5.2.0.dist-info/top_level.txt,sha256=NEFXKVj4euK5ANjLFlrVJ1pxZYZYmKfGfFw9S4nPKI0,8
-metricq-5.2.0.dist-info/RECORD,,
+metricq-5.3.0.dist-info/LICENSE,sha256=4h6-3O0i-fOl6I5GiEgQREkt1oGF13osLvN045KhVEQ,1559
+metricq-5.3.0.dist-info/METADATA,sha256=0thTcQkOsGRJKc7UKyxjb3nDEf0kRRJGv4e71v1OU4A,6985
+metricq-5.3.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+metricq-5.3.0.dist-info/top_level.txt,sha256=NEFXKVj4euK5ANjLFlrVJ1pxZYZYmKfGfFw9S4nPKI0,8
+metricq-5.3.0.dist-info/RECORD,,
```

