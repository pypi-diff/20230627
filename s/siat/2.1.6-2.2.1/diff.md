# Comparing `tmp/siat-2.1.6-py3-none-any.whl.zip` & `tmp/siat-2.2.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 1694808 bytes, number of entries: 120
+Zip file size: 1696065 bytes, number of entries: 120
 -rw-rw-rw-  2.0 fat      840 b- defN 23-Apr-10 11:29 siat/__init__.py
 -rw-rw-rw-  2.0 fat     2130 b- defN 23-Apr-10 11:29 siat/allin.py
 -rw-rw-rw-  2.0 fat      747 b- defN 23-Apr-10 11:29 siat/alpha_vantage_test.py
 -rw-rw-rw-  2.0 fat    28555 b- defN 23-Apr-10 11:29 siat/assets_liquidity.py
 -rw-rw-rw-  2.0 fat     1285 b- defN 23-Apr-10 11:29 siat/assets_liquidity_test.py
 -rw-rw-rw-  2.0 fat    10110 b- defN 23-Apr-10 11:29 siat/barrons_scraping_test.py
 -rw-rw-rw-  2.0 fat    36597 b- defN 23-Apr-10 11:29 siat/beta_adjustment.py
@@ -51,15 +51,15 @@
 -rw-rw-rw-  2.0 fat  2047492 b- defN 23-Jun-05 00:28 siat/fund_china.pickle
 -rw-rw-rw-  2.0 fat    74734 b- defN 23-Jun-10 07:59 siat/fund_china.py
 -rw-rw-rw-  2.0 fat     6649 b- defN 23-Apr-10 11:29 siat/fund_china_test.py
 -rw-rw-rw-  2.0 fat     1116 b- defN 23-Apr-10 11:29 siat/fund_test.py
 -rw-rw-rw-  2.0 fat    17513 b- defN 23-Jun-10 08:35 siat/future_china.py
 -rw-rw-rw-  2.0 fat     1163 b- defN 23-Apr-10 11:29 siat/future_china_test.py
 -rw-rw-rw-  2.0 fat     2402 b- defN 23-Apr-10 11:29 siat/global_index_test.py
--rw-rw-rw-  2.0 fat    65659 b- defN 23-Jun-19 16:30 siat/grafix.py
+-rw-rw-rw-  2.0 fat    65802 b- defN 23-Jun-25 05:18 siat/grafix.py
 -rw-rw-rw-  2.0 fat     3150 b- defN 23-Apr-10 11:29 siat/grafix_test.py
 -rw-rw-rw-  2.0 fat    30544 b- defN 23-Apr-10 11:29 siat/holding_risk.py
 -rw-rw-rw-  2.0 fat      474 b- defN 23-Apr-10 11:29 siat/holding_risk_test.py
 -rw-rw-rw-  2.0 fat     3936 b- defN 23-Apr-10 11:29 siat/local_debug_test.py
 -rw-rw-rw-  2.0 fat    31158 b- defN 23-Apr-10 11:29 siat/market_china.py
 -rw-rw-rw-  2.0 fat    95641 b- defN 23-Apr-10 13:16 siat/markowitz.py
 -rw-rw-rw-  2.0 fat     1593 b- defN 23-Apr-10 11:29 siat/markowitz_ccb_test.py
@@ -85,15 +85,15 @@
 -rw-rw-rw-  2.0 fat   101523 b- defN 23-May-27 06:22 siat/sector_china.py
 -rw-rw-rw-  2.0 fat     5843 b- defN 23-Apr-11 14:17 siat/sector_china_test.py
 -rw-rw-rw-  2.0 fat    29185 b- defN 23-May-25 02:36 siat/security_price.py
 -rw-rw-rw-  2.0 fat    72866 b- defN 23-Jun-19 07:51 siat/security_prices.py
 -rw-rw-rw-  2.0 fat    10779 b- defN 23-Apr-10 11:29 siat/security_prices_test.py
 -rw-rw-rw-  2.0 fat     1335 b- defN 23-Apr-10 11:29 siat/setup.py
 -rw-rw-rw-  2.0 fat     1418 b- defN 23-Apr-10 11:29 siat/shenwan index history test.py
--rw-rw-rw-  2.0 fat   123451 b- defN 23-Jun-19 16:53 siat/stock.py
+-rw-rw-rw-  2.0 fat   128884 b- defN 23-Jun-27 02:43 siat/stock.py
 -rw-rw-rw-  2.0 fat    31655 b- defN 23-Apr-10 11:29 siat/stock_advice_linear.py
 -rw-rw-rw-  2.0 fat     1312 b- defN 23-Apr-10 11:29 siat/stock_base.py
 -rw-rw-rw-  2.0 fat    82785 b- defN 23-Jun-17 02:52 siat/stock_china.py
 -rw-rw-rw-  2.0 fat     1294 b- defN 23-Jun-14 07:32 siat/stock_china_test.py
 -rw-rw-rw-  2.0 fat  1266744 b- defN 23-Jun-05 00:13 siat/stock_info.pickle
 -rw-rw-rw-  2.0 fat     6122 b- defN 23-Apr-10 11:29 siat/stock_info_test.py
 -rw-rw-rw-  2.0 fat     1014 b- defN 23-Apr-10 11:29 siat/stock_list_china_test.py
@@ -111,12 +111,12 @@
 -rw-rw-rw-  2.0 fat   118133 b- defN 23-Apr-10 11:29 siat/translate-20230206.py
 -rw-rw-rw-  2.0 fat   121657 b- defN 23-Apr-10 11:29 siat/translate-20230215.py
 -rw-rw-rw-  2.0 fat   133928 b- defN 23-Jun-18 17:34 siat/translate.py
 -rw-rw-rw-  2.0 fat     3936 b- defN 23-Apr-10 11:29 siat/universal_test.py
 -rw-rw-rw-  2.0 fat    51342 b- defN 23-May-11 00:30 siat/valuation_china.py
 -rw-rw-rw-  2.0 fat     1571 b- defN 23-Apr-10 11:29 siat/valuation_market_china_test.py
 -rw-rw-rw-  2.0 fat    14859 b- defN 23-Apr-10 11:29 siat/var_model_validation.py
--rw-rw-rw-  2.0 fat     1410 b- defN 23-Jun-22 13:44 siat-2.1.6.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-22 13:44 siat-2.1.6.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        5 b- defN 23-Jun-22 13:44 siat-2.1.6.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     9602 b- defN 23-Jun-22 13:44 siat-2.1.6.dist-info/RECORD
-120 files, 7743848 bytes uncompressed, 1680168 bytes compressed:  78.3%
+-rw-rw-rw-  2.0 fat     1410 b- defN 23-Jun-27 03:02 siat-2.2.1.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-27 03:02 siat-2.2.1.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        5 b- defN 23-Jun-27 03:02 siat-2.2.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     9602 b- defN 23-Jun-27 03:02 siat-2.2.1.dist-info/RECORD
+120 files, 7749424 bytes uncompressed, 1681425 bytes compressed:  78.3%
```

## zipnote {}

```diff
@@ -342,20 +342,20 @@
 
 Filename: siat/valuation_market_china_test.py
 Comment: 
 
 Filename: siat/var_model_validation.py
 Comment: 
 
-Filename: siat-2.1.6.dist-info/METADATA
+Filename: siat-2.2.1.dist-info/METADATA
 Comment: 
 
-Filename: siat-2.1.6.dist-info/WHEEL
+Filename: siat-2.2.1.dist-info/WHEEL
 Comment: 
 
-Filename: siat-2.1.6.dist-info/top_level.txt
+Filename: siat-2.2.1.dist-info/top_level.txt
 Comment: 
 
-Filename: siat-2.1.6.dist-info/RECORD
+Filename: siat-2.2.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## siat/grafix.py

```diff
@@ -1125,15 +1125,18 @@
         if data_label==True:
             for a,b in zip(df.index,df[c]):
                 plt.text(a,b+0.02,str(round(b,2)), \
                          ha='center',va='bottom',fontsize=7)
     
     #绘制水平辅助线
     if axhline_label !="":
-        plt.axhline(y=axhline_value,label=axhline_label,color='black',linestyle='--',linewidth=2)  
+        if "零线" in axhline_label:
+            plt.axhline(y=axhline_value,color='black',linestyle='--',linewidth=2)  
+        else:
+            plt.axhline(y=axhline_value,label=axhline_label,color='black',linestyle='--',linewidth=2)  
     
     #坐标轴标记
     plt.ylabel(y_label,fontweight='bold',fontsize=ylabel_txt_size)
     if x_label != "":
         plt.xlabel(x_label,fontweight='bold',fontsize=xlabel_txt_size)
     #图示标题
     plt.title(title_txt,fontweight='bold',fontsize=title_txt_size)
```

## siat/stock.py

```diff
@@ -660,17 +660,151 @@
     retinfo=stock_ret("000002.SZ","2020-1-1","2020-3-16","Daily Adj Ret%",power=3)
     retinfo=stock_ret("000002.SZ","2020-1-1","2020-3-16","Weekly Ret%",power=3)
     retinfo=stock_ret("000002.SZ","2020-1-1","2020-3-16","Monthly Ret%",power=4)
     retinfo=stock_ret("000002.SZ","2020-1-1","2020-3-16","Quarterly Ret%",power=4)
     retinfo=stock_ret("000002.SZ","2019-1-1","2020-3-16","Annual Ret%",power=4)
     retinfo=stock_ret("000002.SZ","2019-1-1","2020-3-16","Cum Ret%",power=4)
 
+#==============================================================
+if __name__ =="__main__":
+    ticker='600519.SS'
+    measures=['Daily Ret%','Weekly Ret%','Monthly Ret%','Quarterly Ret%','Annual Ret%','XYZ']
+    fromdate='2023-1-1'
+    todate='2023-6-25'
+    graph=True
+    smooth=False
+    loc='best'
+    annotate=False
+
+def security_mindicators(ticker,measures,fromdate,todate, \
+                         graph=True,smooth=False,loc='best', \
+                         date_range=False,date_freq=False,annotate=False):
+    """
+    功能：单个证券，多个指标对比
+    date_range=False：指定开始结束日期绘图
+    date_freq=False：指定横轴日期间隔，例如'D'、'2D'、'W'、'M'等，横轴一般不超过25个标注，否则会重叠
+    """
+    # 提前开始日期
+    fromdate1=date_adjust(fromdate,adjust=-365*3)
+    
+    if isinstance(measures,str):
+        measures=[measures]
+    
+    try:
+        pricedf=get_price(ticker,fromdate1,todate)
+    except:
+        print("  #Error(security_mindicators): price info not found for",ticker)
+        return None
+    
+    df=all_calculate(pricedf,ticker,fromdate,todate)
+
+    # 检查指标是否存在
+    colList=list(df)
+    for c in measures:
+        if not (c in colList):
+            print("  #Warning(security_mindicators): unsupported security measure",c)
+            measures.remove(c)
+    df1=df[measures]
+    
+    for c in list(df1):
+        df1.rename(columns={c:ectranslate(c)},inplace=True)
+
+    y_label='证券指标'
+    import datetime; today = datetime.date.today()
+    x_label="数据来源：新浪/东方财富/stooq/雅虎财经，"+str(today)
+
+    axhline_value=0
+    axhline_label=''
+    for c in measures:
+        if 'Ret%' in c:
+            axhline_value=0
+            axhline_label='指标零线'
+            break
+    title_txt="证券多指标趋势对比："+codetranslate(ticker)            
+    """
+    draw_lines(df1,y_label,x_label,axhline_value,axhline_label,title_txt, \
+               data_label=False,resample_freq='H',smooth=smooth,loc=loc,annotate=annotate)
+    """
+    draw_lines2(df1,y_label,x_label,axhline_value,axhline_label,title_txt, \
+               data_label=False,resample_freq='6H',smooth=smooth, \
+               date_range=date_range,date_freq=date_freq,date_fmt='%Y-%m-%d')
+
+    return df1
+
+#==============================================================================
+if __name__ =="__main__":
+    ticker='600519.SS'
+    fromdate='2023-1-1'
+    todate='2023-6-25'
+    boll_days=20
+    graph=True
+    smooth=False
+    loc='best'
+    date_range=False
+    date_freq=False
+    annotate=False
+
+def security_bollinger(ticker,fromdate,todate,boll_days=20, \
+                         graph=True,smooth=False,loc='best', \
+                         date_range=False,date_freq=False,annotate=False):
+    """
+    功能：单个证券，绘制布林带
+    date_range=False：指定开始结束日期绘图
+    date_freq=False：指定横轴日期间隔，例如'D'、'2D'、'W'、'M'等，横轴一般不超过25个标注，否则会重叠
+    
+    解释布林带：
+    1、上线：压力线；下线：支撑线；均线：中界线
+    2、上下限之间：置信区间+/-2std
+    3、价格由下向上穿越下线时，可视为买进信号；价格由下向上穿越中间线时，则有可能加速上行，是加仓买进的信号。
+    4、价格在中界线与上线之间波动运行时为多头市场，可持多或加码；价格长时间在中界线与上线间运行后，由上往下跌破中间线为卖出信号。
+    5、价格在中界线与下线之间向下波动运行时为空头市场，可持空或加抛。
+    """
+    # 提前开始日期
+    fromdate1=date_adjust(fromdate,adjust=-365*1)
+    
+    try:
+        pricedf=get_price(ticker,fromdate1,todate)
+    except:
+        print("  #Error(security_mindicators): price info not found for",ticker)
+        return None
+    
+    # 滚动均值与标准差
+    pricedf['bmiddle']=pricedf["Close"].rolling(window=boll_days).mean()
+    pricedf['bsd']=pricedf["Close"].rolling(window=boll_days).std()
+    pricedf['bupper']=pricedf["bmiddle"] + pricedf['bsd']*2
+    pricedf['blower']=pricedf["bmiddle"] - pricedf['bsd']*2
+    
+    df=pricedf[['bupper','bmiddle','blower','Close']]
+    df.rename(columns={'Close':'收盘价','bmiddle':'中界线','bupper':'压力线','blower':'支撑线'},inplace=True)
+
+    # 截取时间段
+    result,start,end=check_period(fromdate,todate)
+    df1=df[(df.index >= start) & (df.index <= end)]
+
+    y_label='证券指标'
+    import datetime; today = datetime.date.today()
+    x_label="数据来源：新浪/东方财富/stooq/雅虎财经，"+str(today)
+
+    axhline_value=0
+    axhline_label=''
+    title_txt="证券价格布林带趋势："+codetranslate(ticker)            
+    
+    if annotate:
+        draw_lines(df1,y_label,x_label,axhline_value,axhline_label,title_txt, \
+                   data_label=False,resample_freq='H',smooth=smooth,loc=loc,annotate=annotate)
+    else:
+        draw_lines2(df1,y_label,x_label,axhline_value,axhline_label,title_txt, \
+                   data_label=False,resample_freq='6H',smooth=smooth, \
+                   date_range=date_range,date_freq=date_freq,date_fmt='%Y-%m-%d')
+
+    return df1
 
 #==============================================================================
-def stock_price_volatility(ticker,fromdate,todate,type="Weekly Price Volatility",datatag=False,power=4,graph=True):
+def stock_price_volatility(ticker,fromdate,todate,type="Weekly Price Volatility", \
+                           datatag=False,power=0,graph=True):
     """
     功能：绘制证券价格波动风险折线图。
     输入：证券代码ticker；开始日期fromdate，结束日期todate；期间类型type；
     是否标注数据标签datatag，默认否；多项式趋势线的阶数，若为0则不绘制趋势线。
     输出：绘制证券价格波动折线图
     返回：证券价格数据表
     """
```

## Comparing `siat-2.1.6.dist-info/METADATA` & `siat-2.2.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: siat
-Version: 2.1.6
+Version: 2.2.1
 Summary: Securities Investment Analysis Tools (siat)
 Home-page: https://pypi.org/project/siat/
 Author: Prof. WANG Dehong, Business School, BFSU (北京外国语大学 国际商学院 王德宏 教授)
 Author-email: wdehong2000@163.com
 License: Copyright (C) WANG Dehong, 2023. For educational purpose only!
 Platform: UNKNOWN
 Requires-Dist: pandas-datareader
```

## Comparing `siat-2.1.6.dist-info/RECORD` & `siat-2.2.1.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -50,15 +50,15 @@
 siat/fund_china.pickle,sha256=hsPjNAQtvCMTPQV5lFk3sS7cngetWaxFvdyEtNvnU14,2047492
 siat/fund_china.py,sha256=UOYUGxYdRV0i4VNqzROHxD65K6dyd-U4zKagkUTTAuk,74734
 siat/fund_china_test.py,sha256=-Bh6m0J0GPpIbYXx-H2vpzJoNFI6pE2C2jVPa8DazgE,6649
 siat/fund_test.py,sha256=V4ADb8Gsp8gyeFTwcgRsJBpnUih_O-Q2V1ILc5oKjK8,1116
 siat/future_china.py,sha256=PCHpxxC-eBDo3P_nkSeQzMnVCt-H7YAZEDJcxfkdnuU,17513
 siat/future_china_test.py,sha256=BrSzmDVaOHki6rntOtosmRn-6dkfOBuLulJNqh7MOpc,1163
 siat/global_index_test.py,sha256=hnFp3wqqzzL-kAP8mgxDZ54Bd5Ijf6ENi5YJlGBgcXw,2402
-siat/grafix.py,sha256=Xwh_BMs4C_HpoTy4hdHOflwEVBUmzK9hgfWgRQ0v8VA,65659
+siat/grafix.py,sha256=8b0Swf66xXVQlB0aGgQwrO2Vs8baNCaOMfvozOtPv4c,65802
 siat/grafix_test.py,sha256=kXvcpLgQNO7wd30g_bWljLj5UH7bIVI0_dUtXbfiKR0,3150
 siat/holding_risk.py,sha256=108tiI7DDl8uUZkyUiq6Y-McKeim1mxYsgqgk7CcXw8,30544
 siat/holding_risk_test.py,sha256=FRlw_9wFG98BYcg_cSj95HX5WZ1TvkGaOUdXD7-V86s,474
 siat/local_debug_test.py,sha256=CDAOffW1Rvs-TcNN5giWVvHMlch1w4dp-w5SIV9jXL0,3936
 siat/market_china.py,sha256=2_ov1KQwRtHQ6PXNO1TS4-wUPhBuoWla326g0x_xUgQ,31158
 siat/markowitz.py,sha256=g3P-UripHV_VwtQetdGaPtfmRsFUxQICqmtF4Pp6C3k,95641
 siat/markowitz_ccb_test.py,sha256=xBkkoaNHdq9KSUrNuHGgKTdNYUvgi84kNYcf719eoyE,1593
@@ -84,15 +84,15 @@
 siat/sector_china.py,sha256=sHd7nlYWCK0SWAZbu-BLn-3vNPe2E8OFaDFYF67Hoho,101523
 siat/sector_china_test.py,sha256=1wq7ef8Bb_L8F0h0W6FvyBrIcBTEbrTV7hljtpj49U4,5843
 siat/security_price.py,sha256=2oHskgiw41KMGfqtnA0i2YjNNV6cYgtlUK0j3YeuXWs,29185
 siat/security_prices.py,sha256=aqAG7vuGMX6sXkNDyJN0uCU2G6b4lmM9Hq-wQbi-5dA,72866
 siat/security_prices_test.py,sha256=OEphoJ87NPKoNow1QA8EU_5MUYrJF-qKoWKNapVfZNI,10779
 siat/setup.py,sha256=up65rQGLmTBkhtaMLowjoQXYmIsnycnm4g1SYmeQS6o,1335
 siat/shenwan index history test.py,sha256=JCVAzOSEldHalhSFa3pqD8JI_8_djPMQOxpkuYU-Esg,1418
-siat/stock.py,sha256=PocxcWbU8n209F_MaiqJhNIjYV1HJSENqLtmw4iZcXA,123451
+siat/stock.py,sha256=pKa59PIILDCCS78v9Eu68Hd0B5aHieE8tYf8q1gnPjw,128884
 siat/stock_advice_linear.py,sha256=-twT7IGP-NEplkL1WPSACcNJjggRB2j4mlAQCkzOAuo,31655
 siat/stock_base.py,sha256=uISvbRyOGy8p9QREA96CVydgflBkn5L3OXOGKl8oanc,1312
 siat/stock_china.py,sha256=jVSuCWr6TaTx0Y0sgqN-dU9ZL72uKiI_MzvugvH9NaI,82785
 siat/stock_china_test.py,sha256=eO4HWsSvc6qezl0LndjtL24lViEyrBjH_sx2c2Y2Q2M,1294
 siat/stock_info.pickle,sha256=o4M-pcN8Sh8QiwZQAZWY1aelI4xgIGIxors7n2uHSJI,1266744
 siat/stock_info_test.py,sha256=gfG3DbhDACbtD8wnv_R6zhj0t11XaC8NX8uLD9Qv3Fo,6122
 siat/stock_list_china_test.py,sha256=gv14UwMMvkZqtb6G7DCTSuehIwVHuVwu7w60p6gyHoo,1014
@@ -110,11 +110,11 @@
 siat/translate-20230206.py,sha256=-vtI125WyaJhmPotOpDAmclt_XnYVaWU9ByLWZ6FyYE,118133
 siat/translate-20230215.py,sha256=TJgtPE3n8IjljmZ4Pefy8dmHoNdFF-1zpML6BhA9FKE,121657
 siat/translate.py,sha256=nS9gqygAkb-2M2utEjucdw-5kWe7hCrDW1OqX3sed7E,133928
 siat/universal_test.py,sha256=CDAOffW1Rvs-TcNN5giWVvHMlch1w4dp-w5SIV9jXL0,3936
 siat/valuation_china.py,sha256=gYYXeT9bBPyQ251TCsYlibWcu6JA8x-YOKqLUEeLE7U,51342
 siat/valuation_market_china_test.py,sha256=gbJ0ioauuo4koTPH6WKUkqcXiQPafnbhU5eKJ6lpdLA,1571
 siat/var_model_validation.py,sha256=zB_Skk_tmzIR15l6oAW3am4HBGVIG-eZ8gJhCdXZ8Qw,14859
-siat-2.1.6.dist-info/METADATA,sha256=If5sbhDyhraDU7SCELGtjZkCAfp02CG2PKsjT7fBzB4,1410
-siat-2.1.6.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-siat-2.1.6.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
-siat-2.1.6.dist-info/RECORD,,
+siat-2.2.1.dist-info/METADATA,sha256=JsyJp8nbz40mqFLdkr8Ll8GKXpF5JMKBPb_Np2I53cg,1410
+siat-2.2.1.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+siat-2.2.1.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
+siat-2.2.1.dist-info/RECORD,,
```

